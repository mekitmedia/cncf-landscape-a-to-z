{{ $current := .current }}
{{ $alphabet := split "ABCDEFGHIJKLMNOPQRSTUVWXYZ" "" }}

<div class="mb-12">
    <div class="flex items-center justify-between mb-4">
        <h2 class="text-sm font-bold uppercase tracking-widest text-slate-500">The 26-Week Journey</h2>
        <span class="text-sm font-medium text-slate-600" id="progress-text">{{ if $current }}{{ mul (div (add $current.index 1.0) 26.0) 100 | printf "%.0f" }}{{ else }}0{{ end }}% Complete</span>
    </div>
    <div class="flex items-center gap-1 overflow-x-auto pb-4 no-scrollbar" id="alphabet-container">
        {{ range $idx, $letter := $alphabet }}
            {{ $state := "locked" }}
            {{ if $current }}
                {{ if lt $idx $current.index }}
                    {{ $state = "completed" }}
                {{ else if eq $idx $current.index }}
                    {{ $state = "active" }}
                {{ end }}
            {{ end }}

            {{ if eq $state "active" }}
                <a href="/letters/{{ lower $letter }}/"
                   class="flex-shrink-0 w-10 h-10 rounded-lg font-bold text-sm transition-all flex items-center justify-center bg-blue-600 text-white shadow-lg shadow-blue-200 scale-110"
                   aria-current="step"
                   aria-label="Week {{ add $idx 1 }}: Letter {{ $letter }} (Current)">
                    {{ $letter }}
                </a>
            {{ else if eq $state "completed" }}
                <a href="/letters/{{ lower $letter }}/"
                   class="flex-shrink-0 w-10 h-10 rounded-lg font-bold text-sm transition-all flex items-center justify-center bg-blue-100 text-blue-600 border border-blue-200 hover:bg-blue-200"
                   aria-label="Week {{ add $idx 1 }}: Letter {{ $letter }}">
                    {{ $letter }}
                </a>
            {{ else }}
                <span class="flex-shrink-0 w-10 h-10 rounded-lg font-bold text-sm transition-all flex items-center justify-center bg-slate-50 text-slate-300 border border-slate-100 cursor-not-allowed"
                      title="Locked - Available in a future week"
                      aria-label="Week {{ add $idx 1 }}: Letter {{ $letter }} (Locked)">
                    {{ $letter }}
                </span>
            {{ end }}
        {{ end }}
    </div>
</div>

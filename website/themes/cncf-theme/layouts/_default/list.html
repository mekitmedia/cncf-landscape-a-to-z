{{ define "main" }}
<div class="min-h-screen bg-slate-50 font-sans text-slate-900">
    <!-- Navigation Header -->
    <nav class="sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-slate-200 px-6 py-4 flex items-center justify-between">
        <div class="flex items-center gap-2">
            <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center">
                <span class="text-white font-bold text-xl">A</span>
            </div>
            <h1 class="font-bold text-xl tracking-tight">CNCF Landscape <span class="text-blue-600">A-to-Z</span></h1>
        </div>
        <div class="hidden md:flex items-center gap-6">
            <button class="text-sm font-medium text-slate-600 hover:text-blue-600">Newsletter</button>
            <button class="text-sm font-medium text-slate-600 hover:text-blue-600">My Watchlist</button>
            <div class="h-4 w-px bg-slate-300"></div>
            <div class="flex items-center gap-2 text-sm bg-blue-50 text-blue-700 px-3 py-1 rounded-full font-semibold">
                <i data-lucide="check-circle-2" class="w-4 h-4"></i>
                <span>Week 6 of 52</span>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Progress Tracker -->
        <div class="mb-12">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-sm font-bold uppercase tracking-widest text-slate-500">The 52-Week Journey</h2>
                <span class="text-sm font-medium text-slate-600" id="progress-text">12% Complete</span>
            </div>
            <div class="flex items-center gap-1 overflow-x-auto pb-4 no-scrollbar" id="alphabet-container">
                <!-- Alphabet buttons generated by JS -->
            </div>
        </div>

        <!-- Hero Section -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-12">
            <div class="lg:col-span-2 bg-gradient-to-br from-blue-700 to-indigo-900 rounded-3xl p-8 text-white relative overflow-hidden shadow-2xl">
                <div class="relative z-10">
                    <div class="flex items-center gap-3 mb-6">
                        <span class="bg-white/20 backdrop-blur-md px-3 py-1 rounded-full text-xs font-bold uppercase tracking-tighter">Current Phase</span>
                        <span class="text-blue-200 text-sm flex items-center gap-1"><i data-lucide="calendar" class="w-3.5 h-3.5"></i> Mar 1 - Mar 14</span>
                    </div>
                    <h3 class="text-6xl font-black mb-4 tracking-tight">"<span id="current-letter-hero">C</span>" is for Cloud Native.</h3>
                    <p class="text-xl text-blue-100 max-w-lg leading-relaxed mb-8">
                        This week we explore the backbone of modern infrastructure. From DNS to Runtimes, "<span id="current-letter-desc">C</span>" houses some of the most critical graduated projects in the ecosystem.
                    </p>
                    <div class="flex flex-wrap gap-4">
                        <button class="bg-white text-blue-900 px-6 py-3 rounded-xl font-bold hover:bg-blue-50 transition-colors flex items-center gap-2">
                            <i data-lucide="book-open" class="w-4.5 h-4.5"></i> Deep Dive into <span id="current-letter-btn">C</span>
                        </button>
                        <button class="bg-blue-500/30 backdrop-blur-sm border border-white/20 px-6 py-3 rounded-xl font-bold hover:bg-blue-500/40 transition-colors">
                            Full Landscape View
                        </button>
                    </div>
                </div>
                <!-- Background Decoration -->
                <div class="absolute top-[-20%] right-[-5%] text-[280px] font-black text-white/10 leading-none select-none" id="bg-letter">
                    C
                </div>
            </div>

            <div class="bg-white rounded-3xl p-8 border border-slate-200 shadow-sm flex flex-col justify-between">
                <div>
                    <h4 class="text-slate-500 font-bold uppercase tracking-widest text-xs mb-6">Next Letter Unlock</h4>
                    <div class="flex items-center gap-4 mb-8">
                        <div class="w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center text-3xl font-black text-slate-300">
                            D
                        </div>
                        <div>
                            <div class="text-3xl font-mono font-bold text-slate-800" id="countdown">
                                10d 04h 32m
                            </div>
                            <div class="text-sm text-slate-400">Time remaining until 'D' unlock</div>
                        </div>
                    </div>
                    <div class="space-y-4">
                        <div class="flex items-center gap-3 text-slate-600">
                            <i data-lucide="clock" class="text-blue-500 w-4.5 h-4.5"></i>
                            <span class="text-sm">42 tools discovered this letter</span>
                        </div>
                        <div class="flex items-center gap-3 text-slate-600">
                            <i data-lucide="star" class="text-amber-500 w-4.5 h-4.5"></i>
                            <span class="text-sm">12 Graduated projects in "<span id="current-letter-stat">C</span>"</span>
                        </div>
                    </div>
                </div>
                <div class="mt-8 p-4 bg-slate-50 rounded-2xl border border-dashed border-slate-300">
                    <p class="text-xs text-slate-500 italic">
                        "Small steps daily make the landscape manageable."
                    </p>
                </div>
            </div>
        </div>

        <!-- Tools Section -->
        <div class="flex items-center justify-between mb-8">
            <div>
                <h2 class="text-2xl font-bold text-slate-900">Featured '<span id="current-letter-featured">C</span>' Tools</h2>
                <p class="text-slate-500">Hand-picked highlights from the CNCF registry.</p>
            </div>
            <div class="flex gap-2">
                <button class="p-2 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 shadow-sm"><i data-lucide="search" class="w-5 h-5"></i></button>
                <button class="p-2 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 shadow-sm"><i data-lucide="layout-grid" class="w-5 h-5"></i></button>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="tools-grid">
            <!-- Tools Mock Data -->
            <div class="bg-white p-6 rounded-2xl border border-slate-200 hover:border-blue-400 hover:shadow-xl hover:shadow-blue-50 transition-all group">
                <div class="flex justify-between items-start mb-4">
                    <div class="px-2 py-1 rounded text-[10px] font-bold uppercase tracking-tighter bg-green-100 text-green-700">Graduated</div>
                    <button class="text-slate-300 hover:text-amber-400 transition-colors"><i data-lucide="star" class="w-4.5 h-4.5"></i></button>
                </div>
                <h4 class="text-xl font-bold mb-2 group-hover:text-blue-600 transition-colors">Cilium</h4>
                <p class="text-sm text-slate-500 mb-6 min-h-[40px] leading-relaxed">eBPF-based networking, observability, and security.</p>
                <div class="flex items-center justify-between pt-4 border-t border-slate-100 text-xs font-medium text-slate-400">
                    <span class="flex items-center gap-1 uppercase tracking-tighter">Cloud Native Network</span>
                    <span class="flex items-center gap-1"><i data-lucide="external-link" class="w-3 h-3"></i> Docs</span>
                </div>
            </div>
             <div class="bg-white p-6 rounded-2xl border border-slate-200 hover:border-blue-400 hover:shadow-xl hover:shadow-blue-50 transition-all group">
                <div class="flex justify-between items-start mb-4">
                    <div class="px-2 py-1 rounded text-[10px] font-bold uppercase tracking-tighter bg-green-100 text-green-700">Graduated</div>
                    <button class="text-slate-300 hover:text-amber-400 transition-colors"><i data-lucide="star" class="w-4.5 h-4.5"></i></button>
                </div>
                <h4 class="text-xl font-bold mb-2 group-hover:text-blue-600 transition-colors">CoreDNS</h4>
                <p class="text-sm text-slate-500 mb-6 min-h-[40px] leading-relaxed">A flexible, extensible DNS server.</p>
                <div class="flex items-center justify-between pt-4 border-t border-slate-100 text-xs font-medium text-slate-400">
                    <span class="flex items-center gap-1 uppercase tracking-tighter">Orchestration & Management</span>
                    <span class="flex items-center gap-1"><i data-lucide="external-link" class="w-3 h-3"></i> Docs</span>
                </div>
            </div>
             <div class="bg-white p-6 rounded-2xl border border-slate-200 hover:border-blue-400 hover:shadow-xl hover:shadow-blue-50 transition-all group">
                <div class="flex justify-between items-start mb-4">
                    <div class="px-2 py-1 rounded text-[10px] font-bold uppercase tracking-tighter bg-green-100 text-green-700">Graduated</div>
                    <button class="text-slate-300 hover:text-amber-400 transition-colors"><i data-lucide="star" class="w-4.5 h-4.5"></i></button>
                </div>
                <h4 class="text-xl font-bold mb-2 group-hover:text-blue-600 transition-colors">Containerd</h4>
                <p class="text-sm text-slate-500 mb-6 min-h-[40px] leading-relaxed">An industry-standard container runtime.</p>
                <div class="flex items-center justify-between pt-4 border-t border-slate-100 text-xs font-medium text-slate-400">
                    <span class="flex items-center gap-1 uppercase tracking-tighter">Runtime</span>
                    <span class="flex items-center gap-1"><i data-lucide="external-link" class="w-3 h-3"></i> Docs</span>
                </div>
            </div>
             <div class="bg-white p-6 rounded-2xl border border-slate-200 hover:border-blue-400 hover:shadow-xl hover:shadow-blue-50 transition-all group">
                <div class="flex justify-between items-start mb-4">
                    <div class="px-2 py-1 rounded text-[10px] font-bold uppercase tracking-tighter bg-green-100 text-green-700">Graduated</div>
                    <button class="text-slate-300 hover:text-amber-400 transition-colors"><i data-lucide="star" class="w-4.5 h-4.5"></i></button>
                </div>
                <h4 class="text-xl font-bold mb-2 group-hover:text-blue-600 transition-colors">CloudEvents</h4>
                <p class="text-sm text-slate-500 mb-6 min-h-[40px] leading-relaxed">A specification for describing event data in common formats.</p>
                <div class="flex items-center justify-between pt-4 border-t border-slate-100 text-xs font-medium text-slate-400">
                    <span class="flex items-center gap-1 uppercase tracking-tighter">Serverless</span>
                    <span class="flex items-center gap-1"><i data-lucide="external-link" class="w-3 h-3"></i> Docs</span>
                </div>
            </div>
             <div class="bg-white p-6 rounded-2xl border border-slate-200 hover:border-blue-400 hover:shadow-xl hover:shadow-blue-50 transition-all group">
                <div class="flex justify-between items-start mb-4">
                    <div class="px-2 py-1 rounded text-[10px] font-bold uppercase tracking-tighter bg-purple-100 text-purple-700">Incubating</div>
                    <button class="text-slate-300 hover:text-amber-400 transition-colors"><i data-lucide="star" class="w-4.5 h-4.5"></i></button>
                </div>
                <h4 class="text-xl font-bold mb-2 group-hover:text-blue-600 transition-colors">Crossplane</h4>
                <p class="text-sm text-slate-500 mb-6 min-h-[40px] leading-relaxed">Cloud Native Control Plane framework.</p>
                <div class="flex items-center justify-between pt-4 border-t border-slate-100 text-xs font-medium text-slate-400">
                    <span class="flex items-center gap-1 uppercase tracking-tighter">Orchestration</span>
                    <span class="flex items-center gap-1"><i data-lucide="external-link" class="w-3 h-3"></i> Docs</span>
                </div>
            </div>
             <div class="bg-white p-6 rounded-2xl border border-slate-200 hover:border-blue-400 hover:shadow-xl hover:shadow-blue-50 transition-all group">
                <div class="flex justify-between items-start mb-4">
                    <div class="px-2 py-1 rounded text-[10px] font-bold uppercase tracking-tighter bg-purple-100 text-purple-700">Incubating</div>
                    <button class="text-slate-300 hover:text-amber-400 transition-colors"><i data-lucide="star" class="w-4.5 h-4.5"></i></button>
                </div>
                <h4 class="text-xl font-bold mb-2 group-hover:text-blue-600 transition-colors">Chaos Mesh</h4>
                <p class="text-sm text-slate-500 mb-6 min-h-[40px] leading-relaxed">A powerful chaos engineering platform for Kubernetes.</p>
                <div class="flex items-center justify-between pt-4 border-t border-slate-100 text-xs font-medium text-slate-400">
                    <span class="flex items-center gap-1 uppercase tracking-tighter">Observability</span>
                    <span class="flex items-center gap-1"><i data-lucide="external-link" class="w-3 h-3"></i> Docs</span>
                </div>
            </div>
        </div>

        <!-- Navigation Footer -->
        <div class="mt-16 flex items-center justify-between border-t border-slate-200 pt-8 mb-12">
            <button class="flex items-center gap-2 px-4 py-2 text-slate-600 hover:text-blue-600 disabled:opacity-30 transition-colors font-semibold" id="prev-btn">
                <i data-lucide="chevron-left" class="w-5 h-5"></i> Previous Letter
            </button>
            <div class="text-slate-400 text-sm font-medium">
                Letter <span id="current-letter-idx">3</span> of 26
            </div>
            <button class="flex items-center gap-2 px-4 py-2 text-slate-600 hover:text-blue-600 disabled:opacity-30 transition-colors font-semibold" id="next-btn">
                Next Letter <i data-lucide="chevron-right" class="w-5 h-5"></i>
            </button>
        </div>
    </main>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");
        let currentLetter = 'C';
        let progress = 3; // C is 3rd

        const alphabetContainer = document.getElementById('alphabet-container');
        const progressText = document.getElementById('progress-text');

        function handleLetterClick(letter, idx) {
            currentLetter = letter;
            progress = idx + 1;
            updateView(letter);
            renderAlphabet();
        }

        function renderAlphabet() {
            alphabetContainer.innerHTML = '';
            alphabet.forEach((letter, idx) => {
                const isActive = letter === currentLetter;
                const isCompleted = idx + 1 < progress;

                const btn = document.createElement('button');
                btn.textContent = letter;

                let classes = "flex-shrink-0 w-10 h-10 rounded-lg font-bold text-sm transition-all ";
                if (isActive) {
                    classes += "bg-blue-600 text-white shadow-lg shadow-blue-200 scale-110";
                } else if (isCompleted) {
                    classes += "bg-blue-100 text-blue-600 border border-blue-200";
                } else {
                    classes += "bg-white text-slate-400 border border-slate-200 hover:border-blue-300 hover:text-blue-500";
                }
                btn.className = classes;

                btn.onclick = () => {
                    handleLetterClick(letter, idx);
                };

                alphabetContainer.appendChild(btn);
            });
            progressText.textContent = `${Math.round((progress / 26) * 100)}% Complete`;
        }

        function updateView(letter) {
            ['current-letter-hero', 'current-letter-desc', 'current-letter-btn', 'current-letter-stat', 'current-letter-featured', 'bg-letter'].forEach(id => {
                const el = document.getElementById(id);
                if(el) el.textContent = letter;
            });

            // Re-initialize icons just in case (though not strictly needed if DOM not changing)
            // lucide.createIcons();

            // In a real implementation, this would fetch new tool data.
        }

        renderAlphabet();

        const countdownEl = document.getElementById('countdown');
        // Initial time
        let totalSeconds = 10 * 24 * 3600 + 4 * 3600 + 32 * 60;

        function updateCountdown() {
             if(totalSeconds > 0) {
                totalSeconds--;
                const d = Math.floor(totalSeconds / (24 * 3600));
                const h = Math.floor((totalSeconds % (24 * 3600)) / 3600);
                const m = Math.floor((totalSeconds % 3600) / 60);
                countdownEl.textContent = `${d}d ${h}h ${m}m`;
            }
        }

        setInterval(updateCountdown, 60000);

        // Navigation buttons footer
        document.getElementById('prev-btn').onclick = () => {
            const currentIdx = alphabet.indexOf(currentLetter);
            if (currentIdx > 0) {
                handleLetterClick(alphabet[currentIdx-1], currentIdx-1);
            }
        };

        document.getElementById('next-btn').onclick = () => {
            const currentIdx = alphabet.indexOf(currentLetter);
            if (currentIdx < alphabet.length - 1) {
                handleLetterClick(alphabet[currentIdx+1], currentIdx+1);
            }
        };
    });
</script>
{{ end }}
